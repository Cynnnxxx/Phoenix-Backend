const { MessageEmbed } = require("discord.js");const User = require("../../../model/user.js");module.exports = {    commandInfo: {        name: "checkbans",        description: "Shows all players and their ban status."    },    execute: async (interaction) => {        await interaction.deferReply({ ephemeral: false });        try {            const allUsers = await User.find({}).lean().sort({ username: 1 });            const totalUsers = allUsers.length;            if (totalUsers === 0) {                const embed = new MessageEmbed()                    .setColor("RED")                    .setTitle("ðŸš« Ban Status")                    .setDescription("No users found in the database.")                    .setFooter({                        text: "Vortyx",                        iconURL: "https://i.imgur.com/VKPcwAJ.png"                    })                    .setTimestamp();                return interaction.editReply({ embeds: [embed] });            }            const bannedUsers = allUsers.filter(user => user.banned === true);            const unbannedUsers = allUsers.filter(user => !user.banned || user.banned === false);            const summaryEmbed = new MessageEmbed()                .setColor("BLUE")                .setTitle("ðŸš« Ban Status Overview")                .setDescription(`**Total Players:** ${totalUsers}\n**âœ… Unbanned:** ${unbannedUsers.length}\n**âŒ Banned:** ${bannedUsers.length}`)                .setTimestamp()                .setFooter({                    text: "Vortyx",                    iconURL: "https://i.imgur.com/VKPcwAJ.png"                });            const embeds = [summaryEmbed];            if (bannedUsers.length > 0) {                const bannedChunks = [];                for (let i = 0; i < bannedUsers.length; i += 20) {                    bannedChunks.push(bannedUsers.slice(i, i + 20));                }                for (let chunkIndex = 0; chunkIndex < bannedChunks.length; chunkIndex++) {                    const chunk = bannedChunks[chunkIndex];                    const bannedList = chunk.map((user, index) => {                        const num = chunkIndex * 20 + index + 1;                        return `${num}. **${user.username}** âŒ`;                    }).join("\n");                    const bannedEmbed = new MessageEmbed()                        .setColor("RED")                        .setTitle(`âŒ Banned Players ${bannedChunks.length > 1 ? `(${chunkIndex + 1}/${bannedChunks.length})` : ""}`)                        .setDescription(bannedList)                        .setFooter({                            text: `Vortyx â€¢ ${bannedUsers.length} total banned`,                            iconURL: "https://i.imgur.com/VKPcwAJ.png"                        })                        .setTimestamp();                    embeds.push(bannedEmbed);                }            } else {                const noBannedEmbed = new MessageEmbed()                    .setColor("GREEN")                    .setTitle("âœ… Banned Players")                    .setDescription("No players are currently banned.")                    .setFooter({                        text: "Vortyx",                        iconURL: "https://i.imgur.com/VKPcwAJ.png"                    })                    .setTimestamp();                embeds.push(noBannedEmbed);            }            if (unbannedUsers.length > 0) {                const unbannedChunks = [];                const maxUnbanned = Math.min(unbannedUsers.length, 50);                for (let i = 0; i < maxUnbanned; i += 20) {                    unbannedChunks.push(unbannedUsers.slice(i, i + 20));                }                for (let chunkIndex = 0; chunkIndex < unbannedChunks.length; chunkIndex++) {                    const chunk = unbannedChunks[chunkIndex];                    const unbannedList = chunk.map((user, index) => {                        const num = chunkIndex * 20 + index + 1;                        return `${num}. **${user.username}** âœ…`;                    }).join("\n");                    const unbannedEmbed = new MessageEmbed()                        .setColor("GREEN")                        .setTitle(`âœ… Unbanned Players ${unbannedChunks.length > 1 ? `(${chunkIndex + 1}/${unbannedChunks.length})` : ""}${unbannedUsers.length > 50 ? " (First 50)" : ""}`)                        .setDescription(unbannedList)                        .setFooter({                            text: `Vortyx â€¢ ${unbannedUsers.length} total unbanned${unbannedUsers.length > 50 ? " (showing first 50)" : ""}`,                            iconURL: "https://i.imgur.com/VKPcwAJ.png"                        })                        .setTimestamp();                    embeds.push(unbannedEmbed);                }            }            const embedsToSend = embeds.slice(0, 10);            await interaction.editReply({ embeds: embedsToSend });            if (embeds.length > 10) {                for (let i = 10; i < embeds.length; i += 10) {                    const nextBatch = embeds.slice(i, i + 10);                    await interaction.followUp({ embeds: nextBatch });                }            }        } catch (error) {            console.error("Error in checkbans command:", error);            interaction.editReply({ content: "An error occurred while checking ban status. Please try again later.", ephemeral: true });        }    }}